The char map is not properly updated after moving @ after map swithc
